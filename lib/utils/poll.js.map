{"version":3,"file":"poll.js","sourceRoot":"","sources":["../../src/utils/poll.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;GAGG;AACH,MAAM,OAAO,IAAI;IAGf;;;OAGG;IACH,KAAK,CAAC,QAAkB,EAAE,QAAgB;QACxC,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;IACzC,CAAC;IAED,gDAAgD;IAChD,IAAI;QACF,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,EAAE;YAC1B,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC7B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;SAC5B;IACH,CAAC;IAEO,aAAa,CAAC,QAAkB,EAAE,QAAgB;QACxD,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,GAAG,EAAE;YAC/B,QAAQ,EAAE,CAAC;YACX,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QACzC,CAAC,EAAE,QAAQ,CAAC,CAAC;IACf,CAAC;CACF","sourcesContent":["/**\r\n * @license\r\n * Copyright 2024 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * Utility class that allows callers to start or stop continuous polling of a\r\n * callback function at set intervals (without calling `setInterval` itself).\r\n */\r\nexport class Poll {\r\n  private timeoutId?: number;\r\n\r\n  /**\r\n   * Starts continuous polling of the specified callback function after every\r\n   * interval (in ms).\r\n   */\r\n  start(callback: Function, interval: number) {\r\n    this.stop();\r\n    this.updateTimeout(callback, interval);\r\n  }\r\n\r\n  /** Stops the currently running poll, if any. */\r\n  stop() {\r\n    if (this.timeoutId != null) {\r\n      clearTimeout(this.timeoutId);\r\n      this.timeoutId = undefined;\r\n    }\r\n  }\r\n\r\n  private updateTimeout(callback: Function, interval: number) {\r\n    this.timeoutId = setTimeout(() => {\r\n      callback();\r\n      this.updateTimeout(callback, interval);\r\n    }, interval);\r\n  }\r\n}\r\n"]}