{"version":3,"file":"optional_data_container_test.js","sourceRoot":"","sources":["../../src/place_overview/optional_data_container_test.ts"],"names":[],"mappings":"AAAA;;;;GAIG;;AAEH,mCAAmC;AAEnC,OAAO,EAAC,IAAI,EAAiB,MAAM,KAAK,CAAC;AACzC,OAAO,EAAC,aAAa,EAAC,MAAM,mBAAmB,CAAC;AAEhD,OAAO,EAAC,iBAAiB,EAAC,MAAM,iDAAiD,CAAC;AAClF,OAAO,EAAC,WAAW,EAAC,MAAM,2BAA2B,CAAC;AACtD,OAAO,EAAC,aAAa,EAAC,MAAM,0BAA0B,CAAC;AAGvD,OAAO,EAAC,qBAAqB,EAAC,MAAM,8BAA8B,CAAC;AAGnE,MAAM,UAAU,GAAG,aAAa,CAAC,EAAC,EAAE,EAAE,eAAe,EAAE,WAAW,EAAE,SAAS,EAAC,CAAC,CAAC;AAGhF,IAAM,8BAA8B,GAApC,MAAM,8BAA+B,SAAQ,iBAAiB;IAC5D,iBAAiB;QACf,OAAO,EAAE,CAAC;IACZ,CAAC;IAEkB,YAAY,CAAC,KAAY;QAC1C,OAAO,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC;IAC7B,CAAC;CACF,CAAA;AARK,8BAA8B;IADnC,aAAa,CAAC,yCAAyC,CAAC;GACnD,8BAA8B,CAQnC;AAED,QAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE;IACrC,MAAM,GAAG,GAAG,IAAI,WAAW,EAAE,CAAC;IAE9B,KAAK,UAAU,YAAY,CAAC,QAAwB;QAClD,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAA;;eAEjB,QAAQ;;KAElB,CAAC,CAAC;QACH,MAAM,GAAG,CAAC,gBAAgB,EAAE,CAAC;QAC7B,OAAO,IAAI,CAAC,aAAa,CAAC,uCAAuC,CAAE,CAAC;IACtE,CAAC;IAED,EAAE,CAAC,YAAY,EAAE,GAAG,EAAE;QACpB,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,uCAAuC,CAAC,CAAC;QAC3E,MAAM,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,qBAAqB,CAAC,CAAC;IACnD,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;QACpD,MAAM,SAAS,GAAG,MAAM,YAAY,CAAC,IAAI,CAAA,EAAE,CAAC,CAAC;QAE7C,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACvC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;QACjD,MAAM,SAAS,GAAG,MAAM,YAAY,CAAC,IAAI,CAAA;wDACW,UAAU;;KAE7D,CAAC,CAAC;QAEH,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACvC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;QACpD,MAAM,SAAS,GAAG,MAAM,YAAY,CAAC,IAAI,CAAA;wDACW,UAAU;;;;KAI7D,CAAC,CAAC;QAEH,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;QAC5D,MAAM,SAAS,GAAG,MAAM,YAAY,CAAC,IAAI,CAAA;wDACW,UAAU;;;;KAI7D,CAAC,CAAC;QAEH,SAAS,CAAC,aAAa,CAAiC,SAAS,CAAE,CAAC,KAAK;YACrE,UAAU,CAAC;QACf,MAAM,GAAG,CAAC,gBAAgB,EAAE,CAAC;QAE7B,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACvC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/**\r\n * @license\r\n * Copyright 2023 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n// import 'jasmine'; (google3-only)\r\n\r\nimport {html, TemplateResult} from 'lit';\r\nimport {customElement} from 'lit/decorators.js';\r\n\r\nimport {PlaceDataConsumer} from '../place_building_blocks/place_data_consumer.js';\r\nimport {Environment} from '../testing/environment.js';\r\nimport {makeFakePlace} from '../testing/fake_place.js';\r\nimport type {Place} from '../utils/googlemaps_types.js';\r\n\r\nimport {OptionalDataContainer} from './optional_data_container.js';\r\n\r\n\r\nconst FAKE_PLACE = makeFakePlace({id: 'FAKE_PLACE_ID', displayName: 'Foo Bar'});\r\n\r\n@customElement('gmpx-test-optional-data-container-child')\r\nclass TestOptionalDataContainerChild extends PlaceDataConsumer {\r\n  getRequiredFields(): Array<keyof Place> {\r\n    return [];\r\n  }\r\n\r\n  protected override placeHasData(place: Place): boolean {\r\n    return !!place.displayName;\r\n  }\r\n}\r\n\r\ndescribe('OptionalDataContainer', () => {\r\n  const env = new Environment();\r\n\r\n  async function prepareState(children: TemplateResult): Promise<HTMLElement> {\r\n    const root = env.render(html`\r\n      <gmpx-optional-data-container-internal>\r\n        <div>${children}</div>\r\n      </gmpx-optional-data-container-internal>\r\n    `);\r\n    await env.waitForStability();\r\n    return root.querySelector('gmpx-optional-data-container-internal')!;\r\n  }\r\n\r\n  it('is defined', () => {\r\n    const el = document.createElement('gmpx-optional-data-container-internal');\r\n    expect(el).toBeInstanceOf(OptionalDataContainer);\r\n  });\r\n\r\n  it('is not hidden when children is empty', async () => {\r\n    const container = await prepareState(html``);\r\n\r\n    expect(container.hidden).toBe(false);\r\n  });\r\n\r\n  it('is not hidden when child has data', async () => {\r\n    const container = await prepareState(html`\r\n      <gmpx-test-optional-data-container-child .place=${FAKE_PLACE}>\r\n      </gmpx-test-optional-data-container-child>\r\n    `);\r\n\r\n    expect(container.hidden).toBe(false);\r\n  });\r\n\r\n  it('is hidden when any child has no data', async () => {\r\n    const container = await prepareState(html`\r\n      <gmpx-test-optional-data-container-child .place=${FAKE_PLACE}>\r\n      </gmpx-test-optional-data-container-child>\r\n      <gmpx-test-optional-data-container-child>\r\n      </gmpx-test-optional-data-container-child>\r\n    `);\r\n\r\n    expect(container.hidden).toBe(true);\r\n  });\r\n\r\n  it('is not hidden when child later receives data', async () => {\r\n    const container = await prepareState(html`\r\n      <gmpx-test-optional-data-container-child .place=${FAKE_PLACE}>\r\n      </gmpx-test-optional-data-container-child>\r\n      <gmpx-test-optional-data-container-child id=\"target\">\r\n      </gmpx-test-optional-data-container-child>\r\n    `);\r\n\r\n    container.querySelector<TestOptionalDataContainerChild>('#target')!.place =\r\n        FAKE_PLACE;\r\n    await env.waitForStability();\r\n\r\n    expect(container.hidden).toBe(false);\r\n  });\r\n});\r\n"]}