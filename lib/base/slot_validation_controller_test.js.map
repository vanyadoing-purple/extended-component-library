{"version":3,"file":"slot_validation_controller_test.js","sourceRoot":"","sources":["../../src/base/slot_validation_controller_test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * @license\r\n * Copyright 2023 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n// import 'jasmine'; (google3-only)\r\n\r\nimport {html, LitElement, TemplateResult} from 'lit';\r\nimport {customElement} from 'lit/decorators.js';\r\n\r\nimport {Environment} from '../testing/environment.js';\r\n\r\nimport {LoggingController} from './logging_controller.js';\r\nimport {SlotValidationController} from './slot_validation_controller.js';\r\n\r\n@customElement('gmpx-test-slot-validation-controller-host-a')\r\nclass TestSlotValidationControllerHostA extends LitElement {\r\n  logger = new LoggingController(this);\r\n  slotValidator =\r\n      new SlotValidationController(this, this.logger, ['', 'slot-a']);\r\n}\r\n\r\n@customElement('gmpx-test-slot-validation-controller-host-b')\r\nclass TestSlotValidationControllerHostB extends LitElement {\r\n  logger = new LoggingController(this);\r\n  slotValidator = new SlotValidationController(this, this.logger, ['slot-b']);\r\n}\r\n\r\ndescribe('SlotValidationController', () => {\r\n  const env = new Environment();\r\n\r\n  beforeEach(() => {\r\n    spyOn(LoggingController.prototype, 'warn');\r\n  });\r\n\r\n  async function prepareControllerHostA(childrenHTML: TemplateResult):\r\n      Promise<TestSlotValidationControllerHostA> {\r\n    const root = env.render(html`\r\n      <gmpx-test-slot-validation-controller-host-a>\r\n        ${childrenHTML}\r\n      </gmpx-test-slot-validation-controller-host-a>\r\n    `);\r\n    return root.querySelector<TestSlotValidationControllerHostA>(\r\n        'gmpx-test-slot-validation-controller-host-a')!;\r\n  }\r\n\r\n  async function prepareControllerHostB(childrenHTML: TemplateResult):\r\n      Promise<TestSlotValidationControllerHostB> {\r\n    const root = env.render(html`\r\n      <gmpx-test-slot-validation-controller-host-b>\r\n        ${childrenHTML}\r\n      </gmpx-test-slot-validation-controller-host-b>\r\n    `);\r\n    return root.querySelector<TestSlotValidationControllerHostB>(\r\n        'gmpx-test-slot-validation-controller-host-b')!;\r\n  }\r\n\r\n  it('does not log warning when children are correctly slotted', async () => {\r\n    await prepareControllerHostA(html`\r\n      <div>child 1 in supported default slot</div>\r\n      <div>child 2 in supported default slot</div>\r\n      <div slot=\"slot-a\">child in supported named slot</div>\r\n    `);\r\n    await prepareControllerHostB(html`\r\n      <div slot=\"slot-b\">child 1 in supported named slot</div>\r\n      <div slot=\"slot-b\">child 2 in supported named slot</div>\r\n    `);\r\n\r\n    expect(LoggingController.prototype.warn).not.toHaveBeenCalled();\r\n  });\r\n\r\n  it('does not log warning when nothing is slotted', async () => {\r\n    await prepareControllerHostA(html``);\r\n    await prepareControllerHostB(html``);\r\n\r\n    expect(LoggingController.prototype.warn).not.toHaveBeenCalled();\r\n  });\r\n\r\n  it('logs warning when child is in an unsupported named slot', async () => {\r\n    const host = await prepareControllerHostA(html`\r\n      <div slot=\"slot-b\">child in unsupported named slot</div>\r\n    `);\r\n\r\n    expect(LoggingController.prototype.warn)\r\n        .toHaveBeenCalledOnceWith(\r\n            'Detected child element in unsupported \"slot-b\" slot. ' +\r\n                'This component supports the following slots: default, \"slot-a\".',\r\n            host.firstElementChild);\r\n  });\r\n\r\n  it('logs warning when child is in unsupported default slot', async () => {\r\n    const host = await prepareControllerHostB(html`\r\n      <div>child in unsupported default slot</div>\r\n    `);\r\n\r\n    expect(LoggingController.prototype.warn)\r\n        .toHaveBeenCalledOnceWith(\r\n            'Detected child element in unsupported default slot. ' +\r\n                'This component supports the following slots: \"slot-b\".',\r\n            host.firstElementChild);\r\n  });\r\n});\r\n"]}